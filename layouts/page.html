{{ define "main" }}
    <h1 class="post-title">{{ .Title }}</h1>

    {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
    {{ $dateHuman := .Date | time.Format ":date_long" }}
    <time class="post-date" datetime="{{ $dateMachine }}"><em>{{ $dateHuman }}</em></time>

    {{- $toc := .TableOfContents -}}
    {{- if gt (len (findRE "<li" $toc)) 0 -}}
                                <div class="content-with-toc">
                                  <main class="post-content">
                                    {{ .Content }}
                                  </main>
                                  <aside class="post-toc">
                                    <h3>Table of Contents</h3>
                                    {{ $toc | safeHTML }}
                                  </aside>
                                </div>
                                {{- else -}}
                                <main class="post-content">
                                  {{ .Content }}
                                </main>
                                {{- end -}}

  {{ partial "terms.html" (dict "taxonomy" "tags" "page" .) }}
{{ end }}
